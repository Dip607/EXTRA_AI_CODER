{% extends 'forum/base.html' %}
{% load humanize %}

{% block content %}
<!-- 
  FIX APPLIED:
  The outer container divs have been removed from this template.
  The content now correctly sits inside the main content block provided by 'base.html',
  which resolves the navbar alignment and mobile toggle issues.
-->

<!-- Notifications Header -->
<div class="notifications-header glass-card fade-in">
    <div class="header-content">
        <div class="header-left">
            <div class="notifications-icon">
                <i class="fas fa-bell"></i>
            </div>
            <div class="header-text">
                <h2 class="notifications-title">ðŸ”” Notifications</h2>
                <p class="notifications-subtitle">Stay updated with your latest activities and updates</p>
            </div>
        </div>
        <div class="header-stats">
            <div class="stat-item">
                <div class="stat-number">{{ notifications.count }}</div>
                <div class="stat-label">Total Notifications</div>
            </div>
            <div class="stat-item">
                <!-- MODIFIED: Simplified the unread count logic -->
                <div class="stat-number">{{ request.user.notifications.unread.count }}</div>
                <div class="stat-label">Unread</div>
            </div>
        </div>
    </div>
</div>

<!-- Notifications List -->
<div class="notifications-list fade-in" style="animation-delay: 0.1s;">
    {% for note in notifications %}
        <div class="notification-card glass-card slide-in {{ note.is_read|yesno:'read,unread' }}">
            <div class="notification-header">
                <div class="notification-status">
                    {% if note.is_read %}
                        <div class="status-badge read">
                            <i class="fas fa-check-circle"></i>
                            <span>Read</span>
                        </div>
                    {% else %}
                        <div class="status-badge unread">
                            <i class="fas fa-circle"></i>
                            <span>New</span>
                        </div>
                    {% endif %}
                </div>
                <div class="notification-time">
                    <i class="fas fa-clock"></i>
                    <span>{{ note.created_at|naturaltime }}</span>
                </div>
            </div>

            <div class="notification-content">
                <div class="notification-icon">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="notification-message">
                    {{ note.message }}
                </div>
            </div>

            <div class="notification-footer">
                <div class="notification-meta">
                    <div class="meta-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span>{{ note.created_at|date:"M d, Y" }}</span>
                    </div>
                </div>
            </div>
        </div>
    {% empty %}
        <div class="empty-state glass-card">
            <div class="empty-icon">
                <i class="fas fa-bell-slash"></i>
            </div>
            <h3 class="empty-title">No Notifications Yet</h3>
            <p class="empty-description">You're all caught up! New notifications will appear here when you have updates.</p>
            <div class="empty-actions">
                <a href="#" class="modern-btn btn-primary">
                    <i class="fas fa-refresh"></i>
                    <span>Refresh</span>
                </a>
            </div>
        </div>
    {% endfor %}
</div>

<!-- Quick Actions -->
<div class="quick-actions glass-card fade-in" style="animation-delay: 0.2s;">
    <div class="actions-header">
        <i class="fas fa-bolt"></i>
        <span>Notification Settings</span>
    </div>
    <div class="actions-grid">
        <div class="action-item disabled">
            <div class="action-icon">
                <i class="fas fa-check-double"></i>
            </div>
            <div class="action-content">
                <h4 class="action-title">Mark All as Read</h4>
                <p class="action-description">Clear all unread notifications</p>
            </div>
        </div>
        
        <div class="action-item disabled">
            <div class="action-icon">
                <i class="fas fa-cog"></i>
            </div>
            <div class="action-content">
                <h4 class="action-title">Notification Settings</h4>
                <p class="action-description">Manage your notification preferences</p>
            </div>
        </div>
        
        <div class="action-item disabled">
            <div class="action-icon">
                <i class="fas fa-trash-alt"></i>
            </div>
            <div class="action-content">
                <h4 class="action-title">Clear All</h4>
                <p class="action-description">Remove all notifications</p>
            </div>
        </div>
    </div>
</div>

<!-- Background Elements -->
<div class="notifications-background-elements">
    <div class="floating-element element-1">
        <i class="fas fa-bell"></i>
    </div>
    <div class="floating-element element-2">
        <i class="fas fa-envelope"></i>
    </div>
    <div class="floating-element element-3">
        <i class="fas fa-info-circle"></i>
    </div>
    <div class="floating-element element-4">
        <i class="fas fa-exclamation-circle"></i>
    </div>
    <div class="floating-element element-5">
        <i class="fas fa-check-circle"></i>
    </div>
    <div class="floating-element element-6">
        <i class="fas fa-star"></i>
    </div>
</div>

<style>
/* Notifications Header */
.notifications-header {
    background: rgba(20, 20, 20, 0.9);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(80, 80, 80, 0.4);
    border-radius: 24px;
    padding: 40px;
    margin-bottom: 40px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
}

.notifications-header:hover {
    transform: translateY(-5px);
    box-shadow: 0 30px 60px rgba(0,0,0,0.4);
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 30px;
    flex-wrap: wrap;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 20px;
}

.notifications-icon {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
}

.notifications-icon i {
    font-size: 1.8rem;
    color: white;
}

.notifications-title {
    font-size: 2.2rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 8px;
    background: linear-gradient(135deg, #ffffff 0%, #cccccc 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.notifications-subtitle {
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.1rem;
    margin: 0;
}

.header-stats {
    display: flex;
    gap: 20px;
}

.stat-item {
    text-align: center;
    background: rgba(30, 30, 30, 0.6);
    padding: 20px;
    border-radius: 16px;
    border: 1px solid rgba(80, 80, 80, 0.3);
    min-width: 120px;
}

.stat-number {
    font-size: 2rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 5px;
}

.stat-label {
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.9rem;
    font-weight: 500;
}

/* Notifications List */
.notifications-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 40px;
}

.notification-card {
    background: rgba(20, 20, 20, 0.9);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(80, 80, 80, 0.4);
    border-radius: 20px;
    padding: 25px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.notification-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 25px 50px rgba(0,0,0,0.4);
    background: rgba(25, 25, 25, 0.9);
}

.notification-card.unread {
    border-left: 4px solid #3b82f6;
    background: rgba(25, 25, 35, 0.9);
}

.notification-card.read {
    opacity: 0.8;
}

.notification-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    gap: 15px;
}

.status-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 0.8rem;
    font-weight: 600;
}

.status-badge.read {
    background: rgba(34, 197, 94, 0.2);
    color: #22c55e;
    border: 1px solid rgba(34, 197, 94, 0.3);
}

.status-badge.unread {
    background: rgba(59, 130, 246, 0.2);
    color: #3b82f6;
    border: 1px solid rgba(59, 130, 246, 0.3);
}

.notification-time {
    display: flex;
    align-items: center;
    gap: 6px;
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.85rem;
}

.notification-time i {
    font-size: 0.8rem;
}

.notification-content {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    margin-bottom: 15px;
}

.notification-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.notification-icon i {
    font-size: 1rem;
    color: white;
}

.notification-message {
    color: #ffffff;
    font-size: 1rem;
    line-height: 1.5;
    flex: 1;
}

.notification-card.read .notification-message {
    color: rgba(255, 255, 255, 0.7);
}

.notification-footer {
    padding-top: 15px;
    border-top: 1px solid rgba(80, 80, 80, 0.3);
}

.notification-meta {
    display: flex;
    gap: 15px;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 6px;
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.85rem;
}

.meta-item i {
    font-size: 0.8rem;
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 60px 40px;
    background: rgba(20, 20, 20, 0.9);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(80, 80, 80, 0.4);
    border-radius: 24px;
}

.empty-icon {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 25px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.3);
}

.empty-icon i {
    font-size: 2.5rem;
    color: white;
}

.empty-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 15px;
}

.empty-description {
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.1rem;
    margin-bottom: 30px;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
}

.empty-actions {
    display: flex;
    justify-content: center;
    gap: 15px;
}

/* Quick Actions */
.quick-actions {
    background: rgba(20, 20, 20, 0.9);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(80, 80, 80, 0.4);
    border-radius: 24px;
    padding: 30px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.3);
}

.actions-header {
    display: flex;
    align-items: center;
    gap: 12px;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 600;
    font-size: 1.2rem;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(80, 80, 80, 0.3);
}

.actions-header i {
    color: #3b82f6;
    font-size: 1.1rem;
}

.actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.action-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 20px;
    background: rgba(25, 25, 25, 0.6);
    border: 1px solid rgba(80, 80, 80, 0.3);
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative; /* Required for badge positioning */
    overflow: hidden; /* Recommended for clean look */
}

.action-item:hover {
    background: rgba(35, 35, 35, 0.8);
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}

/* NEW STYLES for the "Coming Soon" action items */
.action-item.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none; /* Disables click events */
}

.action-item.disabled:hover {
    transform: none;
    box-shadow: none;
    background: rgba(25, 25, 25, 0.6);
}

.action-item.disabled::after {
    content: 'Coming Soon';
    position: absolute;
    top: 8px;
    right: -30px;
    background-color: #ffd700;
    color: #333;
    font-size: 10px;
    font-weight: 700;
    padding: 3px 30px;
    transform: rotate(45deg);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.action-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.action-icon i {
    font-size: 1.2rem;
    color: white;
}

.action-title {
    color: #ffffff;
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 5px;
}

.action-description {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.85rem;
    margin: 0;
    line-height: 1.4;
}

/* Modern Button */
.modern-btn {
    padding: 12px 24px;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.9rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: none;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.modern-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s ease;
}

.modern-btn:hover::before {
    left: 100%;
}

.btn-primary {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    border: 1px solid rgba(59, 130, 246, 0.5);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
    color: white;
    text-decoration: none;
}

/* Floating Background Elements */
.notifications-background-elements {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 1;
}

.floating-element {
    position: absolute;
    color: rgba(59, 130, 246, 0.08);
    font-size: 3rem;
    animation: float 6s ease-in-out infinite;
}

.element-1 {
    top: 10%;
    left: 5%;
    animation-delay: 0s;
}

.element-2 {
    top: 20%;
    right: 10%;
    animation-delay: 1s;
}

.element-3 {
    bottom: 30%;
    left: 8%;
    animation-delay: 2s;
}

.element-4 {
    bottom: 15%;
    right: 5%;
    animation-delay: 3s;
}

.element-5 {
    top: 50%;
    left: 3%;
    animation-delay: 4s;
}

.element-6 {
    top: 60%;
    right: 8%;
    animation-delay: 5s;
}

@keyframes float {
    0%, 100% {
        transform: translateY(0px) rotate(0deg);
    }
    50% {
        transform: translateY(-20px) rotate(180deg);
    }
}

/* Glass Card Effect */
.glass-card {
    position: relative;
    background: rgba(20, 20, 20, 0.9);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(80, 80, 80, 0.4);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .notifications-header {
        padding: 30px 25px;
        border-radius: 20px;
    }
    
    .header-content {
        flex-direction: column;
        align-items: flex-start;
        gap: 20px;
    }
    
    .header-left {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    
    .notifications-icon {
        width: 60px;
        height: 60px;
    }
    
    .notifications-icon i {
        font-size: 1.5rem;
    }
    
    .notifications-title {
        font-size: 1.8rem;
    }
    
    .notification-card {
        padding: 20px;
    }
    
    .notification-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .notification-content {
        flex-direction: column;
        gap: 10px;
    }
    
    .quick-actions {
        padding: 25px 20px;
    }
    
    .actions-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .floating-element {
        font-size: 2rem;
    }
}

@media (max-width: 480px) {
    .notifications-header,
    .notification-card,
    .quick-actions {
        padding: 20px 15px;
        margin: 10px;
    }
    
    .notifications-title {
        font-size: 1.5rem;
    }
    
    .empty-state {
        padding: 40px 20px;
    }
    
    .empty-icon {
        width: 80px;
        height: 80px;
    }
    
    .empty-icon i {
        font-size: 2rem;
    }
    
    .empty-title {
        font-size: 1.5rem;
    }
}

/* Animation Classes */
.fade-in {
    animation: fadeIn 0.6s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.slide-in {
    animation: slideIn 0.5s ease-out;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Scrollbar Styling */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(30, 30, 30, 0.5);
}

::-webkit-scrollbar-thumb {
    background: rgba(100, 100, 100, 0.5);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(120, 120, 120, 0.7);
}
</style>
{% endblock %}
